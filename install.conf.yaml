# Apply to all commands that come after setting the defaults
- defaults:
    link:
        create: true # Create parent directories to the link as needed
        relink: true # Removes the old target if it's a symlink


# Remove dead symbolic links
- clean: ['~']


# Plugin: git
- git:
    ~/.nvm:
        url: https://github.com/nvm-sh/nvm.git
    ~/.rbenv:
        url: https://github.com/rbenv/rbenv.git
    ~/.rbenv/plugins/ruby-build:
        url: https://github.com/rbenv/ruby-build.git
    ~/.pyenv:
        url: https://github.com/pyenv/pyenv.git
    ~/.goenv:
        url: https://github.com/syndbg/goenv.git
- shell:
    - [cd ~/.rbenv  && src/configure && make -C src]
    - [cd ~/.pyenv  && src/configure && make -C src]


# Plugin: yay
- yay:
    - autojump
    - pkgfile
    - vim
- shell:
    - [sudo pkgfile -u]


# Apps
- link:
    ~/.bash_profile: apps/bash/bash_profile
    ~/.bashrc: apps/bash/bashrc

- link:
    ~/.gitconfig: apps/git/gitconfig

- link:
    ~/.inputrc: apps/readline/inputrc

- link:
    ~/.bundle/config: apps/ruby/bundle/config
    ~/.gemrc: apps/ruby/gemrc

- link:
    ~/.cargo/config: apps/rust/cargo/config

- link:
    ~/.vimrc: apps/vim/vimrc
    ~/.vim/autoload/plug.vim: apps/vim/autoload/plug.vim
- shell:
    - [vim -c 'PlugInstall' +qall, Installing vim plugins]

- link:
    ~/.xprofile: apps/x11/xprofile
    ~/.Xresources: apps/x11/Xresources
